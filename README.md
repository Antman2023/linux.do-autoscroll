# Linux.do 自动滚动阅读助手

为 linux.do 论坛设计的自动滚动脚本，帮助你轻松浏览长帖子。

## ✨ 功能特性

- **一键自动滚动** - 点击按钮即可开始/暂停自动滚动
- **速度可调节** - 支持 0.5x 到 10x 速度调节
- **平滑滚动** - 采用 requestAnimationFrame 实现流畅滚动
- **键盘快捷键** - 支持快捷键操作
- **智能暂停** - 页面隐藏时自动暂停
- **到达底部提醒** - 滚动到底部时自动停止并提示
- **精美界面** - 毛玻璃风格，自动跟随论坛主题配色（含暗色模式）
- **位置记忆** - 自动保存面板位置、速度、最小化状态
- **触摸支持** - 支持移动端拖拽操作

## 📦 安装步骤

### 1. 安装浏览器扩展

首先需要安装用户脚本管理器，选择以下任一方式：

- **Tampermonkey** (推荐): [Chrome](https://chrome.google.com/webstore/detail/tampermonkey/dhdgffkkebhmkfjojejmpbldmpobfkfo) | [Firefox](https://addons.mozilla.org/firefox/addon/tampermonkey/) | [Edge](https://microsoftedge.microsoft.com/addons/detail/tampermonkey/iikmkjmpaadaobahmlepeloendndfphd)

- **Violentmonkey**: [Chrome](https://chrome.google.com/webstore/detail/violentmonkey/jinjaccalgkegednnccohejagnlnfdag) | [Firefox](https://addons.mozilla.org/firefox/addon/violentmonkey/)

### 2. 安装脚本

方式一：直接安装
1. 点击 [Github raw](https://github.com/Antman2023/linux.do-autoscroll/raw/refs/heads/master/linux-do-autoscroll.user.js)
2. 点击"安装此脚本"按钮

方式二：手动安装
1. 复制 `linux-do-autoscroll.user.js` 文件内容
2. 在 Tampermonkey 中点击"添加新脚本"
3. 粘贴代码并保存

## 🎮 使用方法

### 基本操作

1. 访问任意 linux.do 帖子页面
2. 页面右侧会出现**圆形图标**（默认最小化）
3. 点击图标展开控制面板
4. 点击 **"▶ 开始滚动"** 按钮开始自动滚动
5. 使用滑块调节滚动速度
6. 拖拽标题栏可移动面板位置
7. 点击右上角 `−` 按钮或双击标题栏最小化面板

### 快捷键

| 快捷键 | 功能 |
|--------|------|
| `Alt + S` | 开始/暂停滚动 |
| `Alt + ↑` | 加快滚动速度 |
| `Alt + ↓` | 减慢滚动速度 |

### 界面操作

- **双击标题栏** - 最小化/展开控制面板
- **拖动滑块** - 实时调节滚动速度

## 🎯 适用场景

- 快速浏览长帖子
- 批量阅读未读内容
- 解放双手浏览内容
- 提升阅读效率

## 🔧 自定义设置

你可以修改脚本中的 `CONFIG` 对象来自定义行为：

```javascript
const CONFIG = {
    INITIAL_SPEED: 7,           // 初始速度（像素/帧）
    MIN_SPEED: 0.5,             // 最小速度
    MAX_SPEED: 10,              // 最大速度
    BOTTOM_THRESHOLD: 100,      // 距离底部多少像素视为到达底部
    WAIT_TIME_SECONDS: 5,       // 到达底部后等待新内容加载的时间（秒）
    AUTO_PAUSE_ON_HIDE: false,  // 页面隐藏时是否自动暂停
};
```

### 配置说明

- `WAIT_TIME_SECONDS`: 到达底部后等待懒加载的时间
- `AUTO_PAUSE_ON_HIDE`: 设为 `true` 可在切换标签页时自动暂停滚动

## 📸 界面预览

```
默认状态（最小化）：
   🔵 论坛主色圆形图标
   ↻ 待机状态

运行中（最小化）：
   🔵 圆形图标（呼吸缩放动画）
   ↻ 滚动中...

展开状态：
┌─────────────────────────────┐
│ ↻ 自动滚动               [−] │ ← 可拖拽
├─────────────────────────────┤
│  ⏸ 暂停滚动                  │
├─────────────────────────────┤
│  速度                    7   │
│  ━━━━━━━━━━━●━━━             │
├─────────────────────────────┤
│  正在滚动...                  │
└─────────────────────────────┘
```

**视觉状态说明：**
- 🔵 **圆形图标**：使用论坛主题强调色，待机状态
- 🔵 **呼吸动画**：正在滚动时轻微缩放脉冲
- 面板采用毛玻璃半透明效果，自动适配亮/暗色主题

### 面板操作

- **展开面板**：点击圆形图标
- **拖拽移动**：按住标题栏拖动面板到任意位置
- **最小化**：点击右上角 `−` 按钮或双击标题栏
- **快捷键**：图标也支持键盘操作（Tab 选中后 Enter 展开）

## 🛠️ 技术细节

- **框架**: 原生 JavaScript (无依赖)
- **兼容性**: Discourse 论坛系统
- **主题适配**: 通过 Discourse CSS 变量 (--primary, --secondary, --tertiary) 自动跟随论坛配色
- **视觉效果**: backdrop-filter 毛玻璃 + color-mix 半透明适配
- **性能**: requestAnimationFrame 驱动的流畅滚动
- **存储**: localStorage 持久化设置
- **安全性**: 仅在 linux.do 域名下运行

## 🔗 相关资源

- [Tampermonkey 官网](https://www.tampermonkey.net/)

## 📝 更新日志

### v1.6.0 (2025-02-14)
- 🎨 全面 UI 重设计：毛玻璃半透明面板 + 现代圆角布局
- 🎨 配色跟随论坛主题：通过 Discourse CSS 变量自动适配亮/暗色模式
- ✨ emoji 图标替换为矢量 SVG，视觉更精致
- ✨ 按钮状态改用 CSS class 管理，hover 发光 + active 回弹动效
- ✨ 滑块使用论坛主色 + 白色描边，脉冲动画节奏更舒缓
- 🔧 拖拽判断改用 `closest()` 兼容 SVG 子元素点击

### v1.5.4 (2025-02-13)
- 🎨 改用亮橙色背景，更加醒目
- ✨ 滚动时呼吸缩放动画效果

### v1.5.3 (2025-02-13)
- ✨ 新增 StorageManager：持久化面板位置、速度、最小化状态
- ✨ 新增 EventNormalizer：统一鼠标/触摸事件处理
- 🔧 滚动动画改用 requestAnimationFrame 替代 setInterval
- ✨ 拖拽支持边界约束、边缘吸附、触摸设备

### v1.5.1 (2025-01-16)
- ✨ 运行中图标显示绿色（视觉反馈）
- 🔧 修复拖动结束后意外展开面板的问题
- 🔧 优化拖拽体验，区分拖动和点击操作

### v1.5.0 (2025-01-16)
- ✨ 最小化状态改为圆形图标样式
- ✨ 只显示 📖 图标，更加简洁美观
- ✨ 单击图标即可展开面板
- ✨ 优化视觉体验，减少空间占用

### v1.4.1 (2025-01-16)
- ✨ 面板默认处于最小化状态
- ✨ 优化初始体验，减少界面占用

### v1.4.0 (2025-01-16)
- ✨ 添加可拖拽浮动面板功能
- ✨ 添加最小化按钮（标题栏右侧 − 按钮）
- ✨ 改进面板UI布局（标题栏 + 内容区域分离）
- ✨ 双击标题栏也可最小化/展开
- ✨ 拖拽时排除最小化按钮点击

### v1.3.0 (2025-01-16)
- 🔧 完全重写滚动逻辑，适配 Discourse 自动懒加载机制
- ✨ 移除"加载更多"按钮点击逻辑（Discourse 使用自动懒加载）
- ✨ 优化底部检测阈值（100px）
- ✨ 延长默认等待时间到 5 秒
- ✨ 改进状态提示（触发加载、等待加载）

### v1.2.0 (2025-01-16)
- 🔧 修复到达底部后停止的问题
- ✨ 添加自动点击"加载更多"按钮功能
- ✨ 添加智能等待机制（到达底部后等待新内容加载）
- ✨ 显示加载倒计时提示
- ✨ 可配置等待时间

### v1.1.0 (2025-01-16)
- 🔧 修复滚动意外暂停的问题
- ✨ 智能检测 Discourse 懒加载内容
- ✨ 改进底部检测逻辑，防止误判
- ✨ 添加可配置选项
- ✨ 移除默认的页面隐藏自动暂停功能

### v1.0.0 (2025-01-16)
- 初始版本发布
- 支持基础自动滚动功能
- 添加速度调节
- 添加键盘快捷键
- 添加平滑滚动效果

## ⚠️ 注意事项

1. 确保已安装 Tampermonkey 或类似扩展
2. 仅在 linux.do 域名下生效
3. 建议速度设置在 1-3 之间以获得最佳阅读体验
4. 页面隐藏时会自动暂停滚动

## 🤝 贡献

欢迎提交 Issue 和 Pull Request！

## 📄 许可证

MIT License
